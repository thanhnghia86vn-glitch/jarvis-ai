<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>AI OPERATIONS CENTER - QU·∫¢N L√ù NH√ÇN S·ª∞</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0f172a; color: #e2e8f0; padding: 20px; }
        h1 { color: #38bdf8; text-transform: uppercase; letter-spacing: 2px; }
        
        .timeline { margin-top: 30px; position: relative; }
        .timeline::before { content: ''; position: absolute; left: 20px; top: 0; bottom: 0; width: 2px; background: #334155; }
        
        .card { 
            background: #1e293b; border-left: 4px solid #38bdf8; 
            margin: 0 0 20px 50px; padding: 15px; border-radius: 4px; 
            position: relative; box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .card::before {
            content: ''; position: absolute; left: -36px; top: 15px; 
            width: 12px; height: 12px; background: #38bdf8; border-radius: 50%;
        }
        
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .agent-name { font-size: 1.2em; font-weight: bold; color: #fff; }
        .level-badge { background: #f59e0b; color: #000; padding: 2px 8px; border-radius: 10px; font-size: 0.8em; font-weight: bold; }
        .time { color: #94a3b8; font-size: 0.9em; }
        
        .content { color: #cbd5e1; line-height: 1.5; }
        .learned { color: #4ade80; font-style: italic; }
        .result { margin-top: 8px; padding-top: 8px; border-top: 1px dashed #475569; }
        
        .cost-tag { float: right; font-size: 0.8em; color: #f87171; }
    </style>
</head>
<body>
    <h1>üöÄ TRUNG T√ÇM ƒêI·ªÄU H√ÄNH AI (LIVE OPERATING)</h1>
    <p>Theo d√µi ti·∫øn ƒë·ªô h·ªçc t·∫≠p v√† thƒÉng c·∫•p c·ªßa Agent theo th·ªùi gian th·ª±c.</p>

    <div class="timeline" id="timelineData">
        </div>

    <script>
        async function fetchAgents() {
            try {
                const response = await fetch('http://localhost:8000/api/agents');
                const data = await response.json();
                
                const container = document.getElementById('timelineData');
                
                container.innerHTML = data.map(item => `
                    <div class="card" style="border-left-color: ${getColor(item.agent)}">
                        <div class="header">
                            <div>
                                <span class="agent-name">${item.agent}</span>
                                <span class="level-badge">LV.${item.level}</span>
                            </div>
                            <span class="time">${item.time}</span>
                        </div>
                        <div class="content">
                            <div><strong>H√†nh ƒë·ªông:</strong> ${item.action} <span class="cost-tag">Cost: $${item.cost.toFixed(5)}</span></div>
                            <div class="learned">üß† <strong>ƒê√£ h·ªçc:</strong> "${item.learned}"</div>
                            <div class="result">üìÇ <strong>K·∫øt qu·∫£:</strong> ${item.result}</div>
                        </div>
                    </div>
                `).join('');
                
            } catch (e) {
                console.error("L·ªói:", e);
            }
        }

        function getColor(agent) {
            const colors = {
                'Supervisor': '#f472b6', 'Coder': '#4ade80', 
                'Researcher': '#60a5fa', 'Hardware': '#fb923c'
            };
            return colors[agent] || '#cbd5e1';
        }

        fetchAgents();
        setInterval(fetchAgents, 3000); // C·∫≠p nh·∫≠t realtime m·ªói 3s
    </script>
</body>
</html>
